---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/layout/Header.astro';
import Footer from '../../components/layout/Footer.astro';
import Hero from '../../components/sections/Hero.astro';
import About from '../../components/sections/About.astro';
import Gallery from '../../components/sections/Gallery.astro';
import WorkingMethod from '../../components/sections/WorkingMethod.astro';
import Prices from '../../components/sections/Prices.astro';
import Testimonials from '../../components/sections/Testimonials.astro';
import Contact from '../../components/sections/Contact.astro';
import { languages, getContent, isValidLanguage, type Language } from '../../i18n/content';

export function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params;

if (!isValidLanguage(lang)) {
  return Astro.redirect('/en/');
}

const typedLang = lang as Language;
const content = getContent(typedLang);
---

<Layout title={`Massagetherapie Frensis Bulo - ${languages[typedLang]}`} lang={typedLang}>
  <Header data={content.nav} currentLang={typedLang} />
  
  <main>
    <Hero data={content.hero} />
    <About data={content.about} />
    <Gallery data={content.gallery} />
    <WorkingMethod data={content.workingMethod} />
    <Prices data={content.prices} />
    <Testimonials data={content.testimonials} />
    <Contact data={content.contact} location={content.location} />
  </main>
  
  <Footer 
    contact={content.contact} 
    nav={content.nav} 
    copyright={content.footer.copyright} 
  />
</Layout>
